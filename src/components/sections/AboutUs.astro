---
import Section from '../ui/Section.astro';
import { aboutUsData, iconMap, type AboutUsSection } from '../../data/index';

interface Props {
  title?: string;
  sections?: AboutUsSection[];
}

const defaultData = aboutUsData;

const {
  title = defaultData.title,
  sections: propSections,
} = Astro.props;

const sections = (propSections || defaultData.sections).map((section: any) => {
  if (typeof section.icon === 'string') {
    return {
      ...section,
      icon: iconMap[section.icon] || iconMap.Building2,
    };
  }
  return section;
});
---

<Section padding="xl" class="py-20 overflow-hidden bg-white">
  <div class="container mx-auto text-center mb-12">
    <h2 class="text-3xl md:text-4xl font-bold text-stone-800 mb-4">{title}</h2>
  </div>

  <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-4 max-w-7xl mx-auto px-4">
    {sections.map((section: any) => (
      <div
        class="relative bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center justify-start hover:scale-105 hover:shadow-xl transition-all duration-300 group border border-stone-200"
      >
        <div class="bg-amber-100 p-4 rounded-full mb-4 transition-colors duration-300 group-hover:bg-amber-200">
          <section.icon class="h-8 w-8 text-amber-600"/>
        </div>
        <h3 class="text-xl font-semibold mb-3 group-hover:text-amber-600 transition-colors duration-300 text-stone-800">{section.title}</h3>
        <p class="text-stone-600 whitespace-pre-line text-sm leading-relaxed text-center">{section.content}</p>
      </div>
    ))}
  </div>
</Section>
