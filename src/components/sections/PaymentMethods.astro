---
import { CreditCard, Banknote, CreditCardIcon, Wallet } from '@lucide/astro';
import Section from "../ui/Section.astro";
import { iconMap } from "../../data/index";

interface PaymentMethodItem {
  title: string;
  description: string;
  icon: string; // название иконки из @lucide/astro
  bg: string;
  iconBg: string;
  iconColor: string;
}

interface Props {
  title: string;
  subtitle?: string;
  items: PaymentMethodItem[];
}

const { title, subtitle, items } = Astro.props;

// Маппинг иконок для способов оплаты
const paymentIcons: Record<string, any> = {
  CreditCard,
  Banknote,
  CreditCardIcon,
  Wallet,
};
---

<Section padding='xl' id="payment-methods" class="py-24 bg-gradient-to-b from-gray-50 to-white">
  <div class="max-w-6xl mx-auto px-4 text-center mb-16">
    <h2 class="text-3xl md:text-4xl font-bold text-stone-800 mb-6">
      {title}
    </h2>
    {subtitle && (
      <p class="text-stone-600 text-lg max-w-3xl mx-auto">
        {subtitle}
      </p>
    )}
  </div>

  <div class="max-w-6xl mx-auto px-4 grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
    {items.map((item, index) => {
      const IconComponent = paymentIcons[item.icon] || iconMap[item.icon] || CreditCard;
      return (
        <div 
          class="group relative bg-white rounded-3xl p-6 flex flex-col items-center text-center shadow-lg hover:shadow-2xl transform hover:-translate-y-2 transition-all duration-500 border border-neutral-100 hover:border-amber-200"
          style={`transition-delay: ${index * 100}ms;`}
        >
          <!-- Gradient background effect -->
          <div class={`absolute inset-0 bg-gradient-to-br ${item.bg} opacity-0 group-hover:opacity-5 rounded-3xl transition-opacity duration-500`}></div>
          
          <!-- Icon -->
          <div class={`${item.iconBg} w-20 h-20 rounded-2xl flex items-center justify-center mb-4 transform transition-transform duration-500 group-hover:scale-110 group-hover:rotate-3 relative overflow-hidden`}>
            <div class={`absolute inset-0 bg-gradient-to-br ${item.bg} opacity-20`}></div>
            <IconComponent class={`w-10 h-10 relative z-10 ${item.iconColor}`} />
          </div>

          <!-- Content -->
          <h3 class="text-lg font-semibold text-stone-800 mb-2">{item.title}</h3>
          <p class="text-stone-600 text-sm leading-relaxed">{item.description}</p>
        </div>
      );
    })}
  </div>
</Section>

